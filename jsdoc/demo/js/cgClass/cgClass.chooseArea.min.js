cgClass.AddClass("ChooseArea",{init:function(b){var a=this;a.option=$.extend({wrap:$(".wrap"),text:".text",autoList:"autoList",autoItem:".Js-auto-item",focusWrap:".focusWrap",focusWrapItem:".Js-area-item",hoverClass:"hoverClass",init:function(){},createSearchList:function(){},action:function(){}},b,{closeList:function(){a.option.wrap.find(a.option.focusWrap).hide()},createList:function(){a.createList.apply(a,arguments)}});a.outOpt={createList:function(){a.createList.apply(a,arguments)}};a.bindList();a.bindText();a.bindFocusWrap();if(typeof a.option.init=="function"){a.option.init(a.outOpt)}},bindList:function(){var b=this,a=b.option.wrap,d=a.find(b.option.text),c=a.find(b.option.autoList);c.on("mouseenter",b.option.autoItem,function(){$(this).addClass(b.option.hoverClass)}).on("mouseleave",b.option.autoItem,function(){$(this).removeClass(b.option.hoverClass)});c.on("click",b.option.autoItem,function(){c.hide();if(typeof(b.option.action)=="function"){b.option.action(b.option,$.trim($(this).children().attr("title")),$(this))}})},bindText:function(){var b=this,a=b.option.wrap,f=a.find(b.option.text),c=a.find(b.option.autoList),e=a.find(b.option.focusWrap),g={back:8,enter:13,escape:27,up:38,down:40,array:[13,27,38,40]},d=[],h=[];f.on("focus",function(){e.show()}).on("keyup",function(l){var m=l.keyCode;d.push((new Date()).getTime());var k=d[(d.length-1)];var n="";if(e.is(":visible")){e.hide()}if($.inArray(m,g.array)!=-1){if(c.is(":visible")){var j=c.children(b.option.autoItem),i=j.filter("."+b.option.hoverClass);switch(m){case g.up:if(i.length){j.removeClass(b.option.hoverClass);i.prev().addClass(b.option.hoverClass)}else{j.last().addClass(b.option.hoverClass)}break;case g.down:if(i.length){j.removeClass(b.option.hoverClass);i.next().addClass(b.option.hoverClass)}else{j.first().addClass(b.option.hoverClass)}break;case g.enter:c.hide();if(typeof(b.option.action)=="function"){if(i.length){i.click()}else{b.option.action(b.option,$.trim(f.val()),i)}}break;default:break}}}else{setTimeout(function(){n=$.trim(f.val());if(k==d[(d.length-1)]&&n!=""){b.createList(n)}else{if(n==""){c.hide()}}},300)}})},bindFocusWrap:function(){var b=this,a=b.option.wrap,e=a.find(b.option.text),c=a.find(b.option.autoList),d=a.find(b.option.focusWrap);cgClass.Create("Tag",{wrap:d,tagList:".area-tag-list",tagItem:"li",conList:".area-con-list",conItem:".con-item",selectClass:"selected"});d.on("click",b.option.focusWrapItem,function(){b.option.action(b.option,$(this).text())})},createList:function(d){var b=this,a=b.option.wrap,c=a.find(b.option.autoList);c.show()}});