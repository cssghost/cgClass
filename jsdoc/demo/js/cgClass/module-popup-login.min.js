cgClass.AddClass("ModulePopupLogin",{init:function(c){var a=this,f=$.extend({addClass:"module-popup-login",url:"url",dataType:"json",autoShow:true,callback:null},c),e='<div class="text Js-name"><input type="text" placeholder="请输入用户名" /><p class="error">请输入用户名</p></div><div class="text Js-password"><input type="password" placeholder="请输入密码" /><p class="error">请输入密码</p></div><div class="remember"><label><input type="checkbox" /> 记住密码</label></div>',d=f.content,b=$.extend(f,{type:"popup",title:"用户登录",template:e,content:function(g){if(typeof d=="function"){d(g)}g.oCon.on("blur",".text input",function(){a.testLoginNull($(this))})},done:function(h){var g=h.oCon,j=g.find(".text"),k=g.find(".Js-name input"),i=g.find(".Js-password input");h.removeTip();if($.trim(k.val())==""||$.trim(i.val())==""){a.testLoginNull(k);a.testLoginNull(i);h.disableBtn(true)}else{g.find(".error").slideUp();$.ajax({url:f.url,type:"post",dataType:f.dataType,data:{username:k.val(),password:i.val()},success:function(l){if(typeof f.callback=="function"){f.callback(l,h)}},error:function(){h.showTip("登录失败，请重新尝试")}})}},cancel:function(g){g.hide()}});a.popup=cgClass.Create("Popup",b)},testLoginNull:function(a){if($.trim(a.val())==""){a.siblings(".error").slideDown("fast").closest(".text").addClass("text-error")}else{a.siblings(".error").slideUp("fast").closest(".text").removeClass("text-error")}},show:function(a){this.popup.reset();this.popup.show(a)}});