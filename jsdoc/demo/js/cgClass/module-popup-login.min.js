cgClass.AddClass("ModulePopupLogin",{init:function(b){var a=this,d=$.extend({addClass:"module-popup-login",url:"url",dataType:"json",autoShow:true,callback:null},b),c='<div class="text Js-name"><input type="text" placeholder="请输入用户名" /><p class="error">请输入用户名</p></div><div class="text Js-password"><input type="password" placeholder="请输入密码" /><p class="error">请输入密码</p></div><div class="remember"><label><input type="checkbox" /> 记住密码</label></div>';a.popup=cgClass.Create("Popup",{type:"popup",title:"用户登录",addClass:d.addClass,template:c,autoShow:d.autoShow,content:function(e){e.oCon.on("blur",".text input",function(){a.testLoginNull($(this))})},done:function(f){var e=f.oCon,h=e.find(".text"),i=e.find(".Js-name input"),g=e.find(".Js-password input");f.removeTip();if($.trim(i.val())==""||$.trim(g.val())==""){a.testLoginNull(i);a.testLoginNull(g);f.disableBtn(true)}else{e.find(".error").slideUp();$.ajax({url:d.url,type:"post",dataType:d.dataType,data:{username:i.val(),password:g.val()},success:function(j){if(typeof d.callback=="function"){d.callback(j,f)}},error:function(){f.disableBtn(true);f.showTip("登录失败，请重新尝试")}})}},cancel:function(e){e.hide()}})},testLoginNull:function(a){if($.trim(a.val())==""){a.siblings(".error").slideDown("fast").closest(".text").addClass("text-error")}else{a.siblings(".error").slideUp("fast").closest(".text").removeClass("text-error")}},show:function(){this.popup.reset();this.popup.show()}});